(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{249:function(e,t,a){},300:function(e,t,a){e.exports=a(538)},305:function(e,t,a){},306:function(e,t,a){},307:function(e,t,a){},308:function(e,t,a){},315:function(e,t,a){},468:function(e,t,a){},482:function(e,t,a){},483:function(e,t,a){},518:function(e,t,a){},538:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"clearStore",function(){return L}),a.d(n,"fetchChats",function(){return T}),a.d(n,"fetchMessages",function(){return M}),a.d(n,"togglePanel",function(){return D}),a.d(n,"newMessage",function(){return H}),a.d(n,"loginUser",function(){return G}),a.d(n,"regUser",function(){return z}),a.d(n,"changePage",function(){return R}),a.d(n,"fetchUser",function(){return J}),a.d(n,"search",function(){return U}),a.d(n,"newChat",function(){return W}),a.d(n,"addChatToList",function(){return q}),a.d(n,"deleteMessage",function(){return B}),a.d(n,"deleteMessageDone",function(){return X}),a.d(n,"editMessage",function(){return V}),a.d(n,"editMessageDone",function(){return Y});var r=a(0),c=a.n(r),s=a(65),o=a.n(s),i=(a(305),a(306),a(307),a(308),a(93)),l=a(96),u=a(22),d="FETCH_CHATS",m="FETCH_CHATS_DONE",h="FETCH_MESSAGES",g="FETCH_MESSAGES_DONE",p="TOGGLE_PANEL",f="ADD_NEW_MESSAGE",b="LOGIN",E="LOGIN_FAIL",v="REG",O="REG_FAIL",y="CHANGE_PAGE",j="REMOVE_STORE",w="FETCH_USER",k="FETCH_USER_DONE",C="SEARCH",x="SEARCH_DONE",S="CREATE_CHAT",N="CREATE_CHAT_DONE",A="ADD_CHAT_TO_LIST",P="DELETE_MESSAGE",_="DELETE_MESSAGE_DONE",I="EDIT_MESSAGE",F="EDIT_MESSAGE_DONE",L=function(){return{type:j}},T=function(){return{type:d}},M=function(e){return{type:h,payload:{id:e}}},D=function(){return{type:p}},H=function(e){return{type:f,payload:{message:e}}},G=function(e,t){return{type:b,payload:{login:e,password:t}}},z=function(e,t,a){return{type:v,payload:{login:e,password:t,avatar:a}}},R=function(e){return{type:y,payload:e}},J=function(){return{type:w}},U=function(e){return{type:C,payload:{search:e}}},W=function(e){return{type:S,payload:{userId:e}}},q=function(e,t){return{type:A,payload:{chatId:e,user:t}}},B=function(e,t){return{type:P,payload:{messageId:e,chatId:t}}},X=function(e){return{type:_,payload:{message:e}}},V=function(e,t,a){return{type:I,payload:{messageId:e,chatId:t,message:a}}},Y=function(e){return{type:F,payload:{message:e}}},$=a(25),K=a(30),Q=a(550),Z=a(551),ee=a(547),te=a(553),ae=a(556),ne=a(552),re=(a(315),[{key:"user",text:"User",value:"user"}]),ce=Object($.b)(function(e){return{search:e.search,chatList:e.chatList}},function(e){return{actions:Object(u.bindActionCreators)(n,e)}})(function(e){var t=Object(r.useState)(""),a=Object(K.a)(t,2),n=a[0],s=a[1],o=Object(r.useState)(!1),u=Object(K.a)(o,2),d=u[0],m=u[1];return c.a.createElement(Q.a,{open:d,trigger:c.a.createElement("div",{className:"icon-wrap",onClick:function(){return m(!0)}},c.a.createElement(i.a,{icon:l.b}))},c.a.createElement(Q.a.Header,null,"Search"),c.a.createElement(Q.a.Content,{scrolling:!0},c.a.createElement(Z.a,{onSubmit:function(){e.actions.search(n)}},c.a.createElement(ee.a,{label:c.a.createElement(te.a,{defaultValue:re[0].value,options:re}),labelPosition:"left",placeholder:"Search...",fluid:!0,loading:e.search.isFetching,value:n,onChange:function(e,t){return s(t.value)}}),e.search.data&&e.search.data.length>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement(ae.a,{as:"h2"},"Results"),e.search.data.map(function(t){return c.a.createElement(ne.a.Group,null,c.a.createElement(ne.a,null,c.a.createElement(ne.a.Avatar,{as:"a",src:t.avatar}),c.a.createElement(ne.a.Content,null,c.a.createElement(ne.a.Author,null,t.username),c.a.createElement(ne.a.Actions,null,c.a.createElement(ne.a.Action,null,c.a.createElement("span",{onClick:function(){!function(t){m(!1);var a=e.chatList.data.find(function(e){return e.user.id===t.id});if(a)return e.actions.fetchMessages(a.chat.id);e.actions.newChat(t.id)}(t)}},"Text"))))))})))))}),se=Object($.b)(function(e){return{}},function(e){return{actions:Object(u.bindActionCreators)(n,e)}})(function(e){return c.a.createElement("div",{className:"header-wrap"},c.a.createElement("div",{className:"left-side"},c.a.createElement("div",{className:"icon-wrap",onClick:function(){return e.actions.togglePanel()}},c.a.createElement(i.a,{icon:l.a})),c.a.createElement(ce,null)),c.a.createElement("div",{className:"right-size"},c.a.createElement("div",{className:"icon-wrap",onClick:function(){localStorage.removeItem("token"),e.actions.clearStore()}},c.a.createElement(i.a,{icon:l.c}))))}),oe=(a(468),a(288)),ie=a(44),le=a(279),ue=a.n(le),de=a(97),me=a.n(de),he=a(130),ge=a.n(he);me.a.extend(ge.a);var pe=function(){return{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}},fe=function(e){return me()(e).fromNow()},be=function(e){return Object(ie.a)(e||[]).sort(function(e,t){var a=e.message?e.message.time:0;return(t.message?t.message.time:0)-a})},Ee=a(280),ve=a.n(Ee),Oe=function(e){var t=e.name,a=e.date,n=e.message,r=e.id,s=e.avatar;return c.a.createElement("div",{className:"chat-elem-wrap ".concat(e.chatId===r?"toggled":""),onClick:function(){return e.onClick(r)}},c.a.createElement("div",{className:"avatar"},c.a.createElement(oe.a,{avatar:!0,src:s})),c.a.createElement("div",{className:"info"},c.a.createElement("div",{className:"name-wrap"},c.a.createElement("div",{className:"name"},t),c.a.createElement("div",{className:"date"},fe(a))),c.a.createElement(ve.a,{text:n?n.message:"",length:21})))},ye=(a(482),Object($.b)(function(e){return{chatList:e.chatList,chat:e.chat}},function(e){return{actions:Object(u.bindActionCreators)(n,e)}})(function(e){return Object(r.useEffect)(function(){e.chatList.data||e.actions.fetchChats()},[e.actions]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"chat-list-wrap"},e.chatList.data&&e.chatList.data.map(function(t){return t&&t.message&&c.a.createElement(Oe,{key:t.chat.id,id:t.chat.id,chatId:e.chat.id,name:t.user.username,date:t.message.time,message:t.message,avatar:t.user.avatar,onClick:function(a){return e.actions.fetchMessages(t.chat.id)}})})))})),je=a(549),we=(a(483),a(281)),ke=a.n(we),Ce=a(282),xe=a.n(Ce),Se="https://igor-babin-chat-java.herokuapp.com",Ne="".concat(Se,"/ws"),Ae="".concat(Se,"/api/chats"),Pe="".concat(Se,"/api/chat/"),_e="".concat(Se,"/api/auth/login"),Ie="".concat(Se,"/api/me"),Fe="".concat(Se,"/req"),Le="".concat(Se,"/api/users"),Te="".concat(Se,"/api/chat"),Me="".concat(Se,"/api/message"),De={},He=function(e,t,a){return De.send(e,t,a)},Ge=function(e,t){if(De.connected)console.log("already connected");else{var a=t.user.data;(De=xe.a.over(new ke.a(Ne))).connect({},function(){console.log("Connected",t.user),De.subscribe("/res/new-message/".concat(a.id),function(t){var a=t.body;return e.newMessage(JSON.parse(a))}),De.subscribe("/res/new-chat/".concat(a.id),function(t){var n=t.body,r=JSON.parse(n);e.addChatToList(r.chatId,r.user1.id===a.id?r.user1:r.user2)}),De.subscribe("/res/delete-message/".concat(a.id),function(t){var a=t.body,n=JSON.parse(a);console.log(n),e.deleteMessageDone(n),e.fetchChats()}),De.subscribe("/res/edit-message/".concat(a.id),function(t){var a=t.body,n=JSON.parse(a);e.editMessageDone(n),e.fetchChats()})})}},ze=Object($.b)(function(e){return{user:e.user,chat:e.chat}},function(e){return{actions:Object(u.bindActionCreators)(n,e)}})(function(e){var t=Object(r.useState)(""),a=Object(K.a)(t,2),n=a[0],s=a[1];return c.a.createElement(Z.a,{onSubmit:function(t){n&&(He("/req/new-message",{},JSON.stringify({chatId:e.chat.id,userId:e.user.data.id,message:n})),s(""))}},c.a.createElement(ee.a,{placeholder:"Type a message...",fluid:!0,value:n,onChange:function(e,t){return s(t.value)}}))}),Re=a(66),Je=a(540),Ue=a(548);a(518);me.a.extend(ge.a);var We=Object($.b)(function(){return{}},function(e){return{actions:Object(u.bindActionCreators)(n,e)}})(function(e){var t=e.message,a=e.user,n=e.actions,s=t.user.id===a.id,o=Object(r.useState)(!1),i=Object(K.a)(o,2),l=i[0],u=i[1],d=Object(r.useState)(!1),m=Object(K.a)(d,2),h=m[0],g=m[1],p=Object(r.useState)(t.message),f=Object(K.a)(p,2),b=f[0],E=f[1];return c.a.createElement("div",{className:"message-item ".concat(l?"to-delete":""),style:{alignItems:s?"flex-end":"flex-start"}},c.a.createElement("p",{className:s?"from-me":"from-them"},t.message,c.a.createElement("span",{className:"info-block"},c.a.createElement("span",{className:"time"},fe(t.time)),s&&c.a.createElement("span",{className:"icons"},c.a.createElement(Q.a,{trigger:c.a.createElement(Re.a,{name:"trash",size:"small",onClick:function(){return u(!0)}}),open:l,onClose:function(){return u(!1)},basic:!0,size:"small"},c.a.createElement(Q.a.Content,null,c.a.createElement(ae.a,{as:"h3",textAlign:"center",className:"white-header"},"Are you sure you want to delete the message?")),c.a.createElement(Q.a.Actions,{className:"action-btn"},c.a.createElement(Je.a,{color:"red",onClick:function(){u(!1),n.deleteMessage(t.id,t.chat.id)},inverted:!0},c.a.createElement(Re.a,{name:"trash"})," Delete"),c.a.createElement(Je.a,{color:"green",onClick:function(){return u(!1)},inverted:!0},c.a.createElement(Re.a,{name:"cancel"})," Cancel"))),c.a.createElement(Q.a,{trigger:c.a.createElement(Re.a,{name:"edit",size:"small",onClick:function(){return g(!0)}}),open:h,onClose:function(){return g(!1)},basic:!0,size:"small"},c.a.createElement(Q.a.Content,null,c.a.createElement(ae.a,{as:"h3",textAlign:"center",className:"white-header"},"Edit message"),c.a.createElement(Z.a,null,c.a.createElement(Ue.a,{value:b,onChange:function(e,t){return E(t.value)},style:{minHeight:200}}))),c.a.createElement(Q.a.Actions,{className:"action-btn"},c.a.createElement(Je.a,{color:"green",onClick:function(){g(!1),n.editMessage(t.id,t.chat.id,b)},inverted:!0},c.a.createElement(Re.a,{name:"edit"})," Edit"),c.a.createElement(Je.a,{color:"blue",onClick:function(){return g(!1)},inverted:!0},c.a.createElement(Re.a,{name:"cancel"})," Cancel")))))),c.a.createElement(oe.a,{avatar:!0,src:t.user.avatar}))}),qe=function(e){return c.a.createElement(c.a.Fragment,null," ",(e.chat.data||[]).map(function(t){return c.a.createElement(We,{key:t.id,message:t,user:e.user})}))},Be=Object($.b)(function(e){return{chat:e.chat,user:e.user}},function(e){return{actions:Object(u.bindActionCreators)(n,e)}})(function(e){return c.a.createElement("div",{className:"chat-page-wrapper"},e.chat.isOpen?e.chat.isFetching?c.a.createElement("div",{className:"loader-wrap"},c.a.createElement(je.a,{active:!0,inline:"centered"})):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"messages-wrap"},c.a.createElement(qe,{chat:e.chat,user:e.user.data})),c.a.createElement("div",{className:"input-wrap"},c.a.createElement(ze,null))):"close")}),Xe=a(555),Ve=Object($.b)(function(e){return{state:e,showPanel:e.showPanel,user:e.user}},function(e){return{actions:Object(u.bindActionCreators)(n,e)}})(function(e){return Object(r.useEffect)(function(){e.actions&&e.user.data&&(console.log("init"),Ge(e.actions,e.state))},[e.actions,e.user]),Object(r.useEffect)(function(){e.actions.fetchUser()},[e.actions]),e.user.data&&!e.user.isFetching?c.a.createElement("div",{className:"main-wrapper"},c.a.createElement("div",{style:{background:"white"}},c.a.createElement(se,null),c.a.createElement("div",{className:"content-wrap"},e.showPanel&&c.a.createElement(ye,e),c.a.createElement(Be,null)))):c.a.createElement(Xe.a,{active:!0,inverted:!0},c.a.createElement(je.a,{inverted:!0}))}),Ye=(a(519),a(557)),$e=a(558),Ke=a(554),Qe=Object($.b)(function(e){return{showPanel:e.showPanel,loginPage:e.loginPage}},function(e){return{actions:Object(u.bindActionCreators)(n,e)}})(function(e){var t=Object(r.useState)(""),a=Object(K.a)(t,2),n=a[0],s=a[1],o=Object(r.useState)(""),i=Object(K.a)(o,2),l=i[0],u=i[1];return c.a.createElement(Ye.a,{textAlign:"center",style:{position:"absolute",top:"30%",left:"35%"},verticalAlign:"middle"},c.a.createElement(Ye.a.Column,{style:{width:500,background:"white"}},c.a.createElement(ae.a,{as:"h2",textAlign:"center"},"Login to your account"),c.a.createElement(Z.a,{size:"large"},c.a.createElement($e.a,{stacked:!0},c.a.createElement(Z.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",value:n,onChange:function(e,t){return s(t.value)}}),c.a.createElement(Z.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",value:l,onChange:function(e,t){return u(t.value)},error:e.loginPage&&!!e.loginPage.error}),c.a.createElement(Je.a,{className:"color-btn",fluid:!0,size:"large",onClick:function(){return e.actions.loginUser(n,l)},loading:e.loginPage&&e.loginPage.isFetching},"Login"))),e.loginPage&&!!e.loginPage.error&&c.a.createElement(Ke.a,{error:!0,content:e.loginPage.error}),c.a.createElement(Ke.a,null,"New to us? ",c.a.createElement("a",{href:"#",onClick:function(){return e.actions.changePage("reg")}},"Sign Up"))))}),Ze=a(283),et=a.n(Ze),tt=(a(520),Object(ie.a)(function(e){for(var t=[],a=0;a<e;a++)t[a]=ue.a.avatar();return t}(14))),at=Object($.b)(function(e){return{showPanel:e.showPanel,regPage:e.regPage}},function(e){return{actions:Object(u.bindActionCreators)(n,e)}})(function(e){var t=Object(r.useState)(""),a=Object(K.a)(t,2),n=a[0],s=a[1],o=Object(r.useState)(""),i=Object(K.a)(o,2),l=i[0],u=i[1],d=Object(r.useState)(""),m=Object(K.a)(d,2),h=m[0],g=m[1];return console.log(e.regPage&&e.regPage.error),c.a.createElement(Ye.a,{textAlign:"center",style:{position:"absolute",top:"20%",left:"35%"},verticalAlign:"middle"},c.a.createElement(Ye.a.Column,{style:{width:500,background:"white"}},c.a.createElement(ae.a,{as:"h2",textAlign:"center"},"Sign up to your account"),c.a.createElement(Z.a,{size:"large"},c.a.createElement($e.a,{stacked:!0},c.a.createElement(Z.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",value:n,onChange:function(e,t){return s(t.value)}}),c.a.createElement(Z.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",value:l,onChange:function(e,t){return u(t.value)}}),c.a.createElement(ae.a,{as:"h4",textAlign:"left"},"Choose a photo"),c.a.createElement(et.a,{images:tt.map(function(e,t){return{src:e,value:t}}),onPick:function(e){return g(e.src)}}),c.a.createElement(Je.a,{className:"color-btn",fluid:!0,size:"large",onClick:function(){return e.actions.regUser(n,l,h)},loading:e.regPage&&e.regPage.isFetching},"Sign up"))),e.regPage&&!!e.regPage.error&&c.a.createElement(Ke.a,{error:!0,content:e.regPage.error}),c.a.createElement(Ke.a,null,"Already has account? ",c.a.createElement("a",{href:"#",onClick:function(){return e.actions.changePage("login")}},"Login"))))}),nt=(a(249),function(){particlesJS("particles-js",{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:5,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:2,direction:"none",random:!1,straight:!1,out_mode:"out",attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"repulse"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0,config_demo:{hide_card:!1,background_color:"#b61924",background_image:"",background_position:"50% 50%",background_repeat:"no-repeat",background_size:"cover"}})}),rt=function(e){return Object(r.useEffect)(function(){nt()},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:"particles-js"}),"login"===e.page?c.a.createElement(Qe,null):c.a.createElement(at,null))},ct=Object($.b)(function(e){return{page:e.page}})(function(e){switch(e.page){case"login":case"reg":return c.a.createElement(rt,{page:e.page});default:return c.a.createElement("div",{className:"App"},c.a.createElement(Ve,null))}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var st=a(24),ot=a.n(st),it=a(27),lt=a(284),ut=a.n(lt),dt=a(13),mt=a(285),ht=function(){var e=Object(mt.a)(ot.a.mark(function e(t,a){var n,r,c;return ot.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a&&a.headers?Object(dt.a)({},pe().headers,{},a.headers):pe().headers,a&&a.body&&(n=new Headers(Object(dt.a)({"Content-Type":"application/json"},n))),e.next=4,fetch(t,Object(dt.a)({},a||{},{headers:n}));case 4:if(r=e.sent,console.log(r),r.ok){e.next=13;break}return console.error(r),e.next=10,r.json();case 10:throw c=e.sent,console.log(c),new Error(c.message);case 13:return e.next=15,r.json();case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),gt=ot.a.mark(kt),pt=ot.a.mark(Ct),ft=ot.a.mark(xt),bt=ot.a.mark(St),Et=ot.a.mark(Nt),vt=ot.a.mark(At),Ot=ot.a.mark(Pt),yt=ot.a.mark(_t),jt=ot.a.mark(It),wt=ot.a.mark(Ft);function kt(e){var t;return ot.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ht(Ae);case 3:return t=e.sent,e.next=6,Object(it.a)({type:m,payload:t});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},gt,null,[[0,8]])}function Ct(e){var t;return ot.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ht(Pe+e.payload.id,{headers:pe().headers});case 3:return t=a.sent,a.next=6,Object(it.a)({type:g,payload:t});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},pt,null,[[0,8]])}function xt(e){var t;return ot.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ht(_e,{method:"POST",body:JSON.stringify({username:e.payload.login,password:e.payload.password}),headers:{"X-Requested-With":"XMLHttpRequest"}});case 3:return t=a.sent,localStorage.setItem("token",t.token),a.next=7,Object(it.a)({type:y,payload:"chat"});case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(it.a)({type:E,payload:{error:a.t0.message}});case 13:console.error(a.t0);case 14:case"end":return a.stop()}},ft,null,[[0,9]])}function St(e){var t;return ot.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ht(Ie,{method:"GET",headers:pe().headers});case 3:return t=e.sent,e.next=6,Object(it.a)({type:k,payload:{user:t}});case 6:e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),localStorage.removeItem("token"),e.next=14,Object(it.a)({type:j});case 14:case"end":return e.stop()}},bt,null,[[0,8]])}function Nt(e){var t,a,n,r;return ot.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,a=t.login,n=t.password,r=t.avatar,c.prev=1,c.next=4,ut()({method:"POST",url:Fe,data:{username:a,password:n,avatar:r}});case 4:return c.sent,c.next=7,Object(it.a)({type:b,payload:{login:a,password:n}});case 7:c.next=14;break;case 9:return c.prev=9,c.t0=c.catch(1),c.next=13,Object(it.a)({type:O,payload:{error:c.t0.message}});case 13:console.error(c.t0);case 14:case"end":return c.stop()}},Et,null,[[1,9]])}function At(e){var t;return ot.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ht(Le+"?search=".concat(e.payload.search));case 3:return t=a.sent,a.next=6,Object(it.a)({type:x,payload:t});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.error(a.t0);case 11:case"end":return a.stop()}},vt,null,[[0,8]])}function Pt(e){var t;return ot.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ht(Te,{method:"PUT",body:JSON.stringify({userId:e.payload.userId})});case 3:return t=a.sent,a.next=6,Object(it.a)({type:N,payload:{chatId:t.chatId}});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.error(a.t0);case 11:case"end":return a.stop()}},Ot,null,[[0,8]])}function _t(e){return ot.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ht(Me+"/".concat(e.payload.messageId),{method:"DELETE",body:JSON.stringify({chatId:e.payload.chatId})});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}},yt,null,[[0,5]])}function It(e){return ot.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ht(Me+"/".concat(e.payload.messageId),{method:"POST",body:JSON.stringify({chatId:e.payload.chatId,message:e.payload.message})});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}},jt,null,[[0,5]])}function Ft(){return ot.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(it.b)(d,kt);case 2:return e.next=4,Object(it.b)(h,Ct);case 4:return e.next=6,Object(it.b)(b,xt);case 6:return e.next=8,Object(it.b)(w,St);case 8:return e.next=10,Object(it.b)(v,Nt);case 10:return e.next=12,Object(it.b)(C,At);case 12:return e.next=14,Object(it.b)(S,Pt);case 14:return e.next=16,Object(it.b)(P,_t);case 16:return e.next=18,Object(it.b)(I,It);case 18:case"end":return e.stop()}},wt)}var Lt={chatList:{data:null,isFetching:!1},user:{isFetching:!1,data:null},chat:{id:null,isFetching:!1,isOpen:!1,data:[]},showPanel:!0,page:localStorage.getItem("token")&&"undefined"!==localStorage.getItem("token")?"chat":"login",search:{isFetching:!1}};function Tt(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case d:return Object(dt.a)({},n,{chatList:Object(dt.a)({},n.chatList,{isFetching:!0})});case p:return Object(dt.a)({},n,{showPanel:!n.showPanel});case m:return Object(dt.a)({},n,{chatList:Object(dt.a)({},n.chatList,{data:be(r.payload),isFetching:!1})});case h:return Object(dt.a)({},n,{chat:Object(dt.a)({},n.chat,{id:r.payload.id,isFetching:!0,isOpen:!0})});case g:return Object(dt.a)({},n,{chat:Object(dt.a)({},n.chat,{data:r.payload,isFetching:!1})});case f:return t=r.payload.message,e=Object(ie.a)(n.chatList.data||[]).map(function(e){return e.chat.id===t.chat.id&&(e.message=t),e}),Object(dt.a)({},n,{chatList:Object(dt.a)({},n.chatList,{data:be(e)}),chat:Object(dt.a)({},n.chat,{data:n.chat.id===t.chat.id?[].concat(Object(ie.a)(n.chat.data||[]),[r.payload.message]):n.chat.data})});case y:return Object(dt.a)({},n,{page:r.payload});case j:return Object(dt.a)({},Lt,{page:"login"});case w:return Object(dt.a)({},n,{user:Object(dt.a)({},n.user,{isFetching:!0})});case k:return Object(dt.a)({},n,{user:Object(dt.a)({},n.user,{isFetching:!1,data:r.payload.user})});case b:return Object(dt.a)({},n,{loginPage:{isFetching:!0,error:null}});case E:return Object(dt.a)({},n,{loginPage:{isFetching:!1,error:r.payload.error}});case v:return Object(dt.a)({},n,{regPage:{isFetching:!0,error:null}});case O:return Object(dt.a)({},n,{regPage:{isFetching:!1,error:r.payload.error}});case C:return Object(dt.a)({},n,{search:Object(dt.a)({},n.search,{isFetching:!0})});case x:return Object(dt.a)({},n,{search:Object(dt.a)({},n.search,{isFetching:!1,data:r.payload})});case S:return Object(dt.a)({},n,{chat:Object(dt.a)({},n.chat,{isFetching:!0,isOpen:!0})});case N:return Object(dt.a)({},n,{chat:Object(dt.a)({},n.chat,{id:r.payload.chatId,isFetching:!1,data:[]})});case A:return(e=Object(ie.a)(n.chatList.data||[])).push({chat:{id:r.payload.chatId},message:null,user:r.payload.user}),Object(dt.a)({},n,{chatList:Object(dt.a)({},n.chatList,{data:be(e)})});case _:return(t=r.payload.message).chat.id!==n.chat.id?n:(a=Object(ie.a)(n.chat.data||[]).map(function(e){return e.id===t.id?void 0:e}).filter(function(e){return e}),Object(dt.a)({},n,{chat:Object(dt.a)({},n.chat,{data:a})}));case F:return(t=r.payload.message).chat.id!==n.chat.id?n:(a=Object(ie.a)(n.chat.data||[]).map(function(e){return e.id===t.id?t:e}),Object(dt.a)({},n,{chat:Object(dt.a)({},n.chat,{data:a})}));default:return n}}var Mt=a(287),Dt=a(286),Ht=function(){var e=Object(Mt.a)(),t=Object(u.createStore)(Tt,Object(Dt.composeWithDevTools)(Object(u.applyMiddleware)(e)));return e.run(Ft),t}();o.a.render(c.a.createElement($.a,{store:Ht},c.a.createElement(ct,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[300,1,2]]]);
//# sourceMappingURL=main.9daf078a.chunk.js.map